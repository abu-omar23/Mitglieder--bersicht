<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Vereinsmitglieder √úbersicht</title>
<style>
:root {
  --blue:#0074D9;--blue-dark:#005fa3;--green:#2ECC40;--red:#E74C3C;--gray:#f4f6fa;--radius:10px;
}
body{font-family:Arial,Helvetica,sans-serif;margin:0;background:var(--gray);}
header{background:var(--blue);color:white;text-align:center;padding:1rem;}
main{max-width:1100px;margin:1rem auto;background:white;border-radius:var(--radius);
box-shadow:0 2px 8px rgba(0,0,0,.1);padding:1rem;}
h2{text-align:center;margin:0;color:#333}
.top-bar{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem}
button{border:none;border-radius:8px;cursor:pointer;padding:.6rem 1rem;font-size:1rem;transition:.2s}
button:hover{filter:brightness(.9)}
.btn-add{background:var(--green);color:white}
.btn-blue{background:var(--blue);color:white}
.btn-red{background:var(--red);color:white}
.btn-gray{background:#999;color:white}
.search-icon{background:white;border:2px solid var(--blue);border-radius:50%;width:38px;height:38px;
display:flex;align-items:center;justify-content:center;color:var(--blue);cursor:pointer;font-weight:bold}
.search-icon:hover{background:var(--blue);color:white}
#searchField{display:none;padding:.6rem;border:1px solid #ccc;border-radius:8px;width:180px}
.filter-box{text-align:center;margin-bottom:1rem}
.filter-box select{padding:.5rem .8rem;border-radius:8px;border:1px solid #ccc;font-size:1rem;background:#f9f9f9}
.table-wrapper{overflow-x:auto}
table{width:100%;border-collapse:collapse}
th,td{padding:.6rem;border-bottom:1px solid #ddd;text-align:left;font-size:.95rem}
th{background:#f0f0f0;cursor:pointer;user-select:none}
th span{margin-left:.3rem;font-size:.8rem;color:#999}
tr:hover{background:#f9f9f9}
.tab-buttons{display:flex;justify-content:center;gap:.5rem;flex-wrap:wrap;margin:1rem 0}
.tab-buttons button{background:#ddd;color:black}
.tab-buttons .active{background:var(--blue);color:white}
.info-btn{background:var(--blue);color:white;border-radius:50%;width:28px;height:28px;
display:flex;align-items:center;justify-content:center;font-weight:bold}
.info-btn:hover{background:var(--blue-dark)}
.modal{display:none;position:fixed;left:0;top:0;width:100%;height:100%;
background:rgba(0,0,0,.5);justify-content:center;align-items:center;padding:1rem;z-index:10}
.modal-content{background:white;border-radius:var(--radius);padding:1.2rem;max-width:420px;width:100%;
box-shadow:0 4px 20px rgba(0,0,0,.3);animation:fadeIn .25s}
@keyframes fadeIn{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
.modal-content input,.modal-content select{width:100%;padding:.5rem;margin-bottom:.8rem;border:1px solid #ccc;border-radius:6px}
.modal-buttons{display:flex;justify-content:space-between;flex-wrap:wrap;gap:.5rem}
.member-list{display:none;flex-direction:column;gap:.5rem}
.member-item{background:white;border-radius:var(--radius);padding:.8rem 1rem;
box-shadow:0 2px 6px rgba(0,0,0,.1);transition:all .3s ease}
.member-item h3{margin:0;font-size:1.05rem;display:flex;justify-content:space-between;align-items:center;cursor:pointer;color:var(--blue)}
.member-details{max-height:0;overflow:hidden;transition:max-height .4s ease,padding .3s ease}
.member-details.open{padding-top:.6rem;max-height:500px}
.member-details p{margin:.3rem 0;font-size:.9rem}
.member-actions{margin-top:.5rem;display:flex;gap:.4rem;flex-wrap:wrap}
.member-actions button{flex:1}
@media(max-width:768px){table{display:none}.member-list{display:flex}}
</style>
</head>
<body>
<header><h1>Vereinsmitglieder √úbersicht</h1></header>
<main>
<h2>Mitgliederverwaltung</h2>
<div class="top-bar">
<button class="btn-add" onclick="openAddModal()">+ Neues Mitglied</button>
<div style="display:flex;align-items:center;gap:.5rem">
<div class="search-icon" onclick="toggleSearch()">üîç</div>
<input id="searchField" type="text" placeholder="Nach Name suchen..." onkeyup="searchMembers()">
</div>
</div>
<div class="filter-box">
<label>Filtern nach:</label>
<select id="filterSelect" onchange="filterMembers(this.value)">
<option value="alle">Alle</option>
<option value="Boxen">Boxen</option>
<option value="Kickboxen">Kickboxen</option>
<option value="Kinder">Kinder</option>
<option value="Erwachsene">Erwachsene</option>
</select>
</div>
<div class="tab-buttons">
<button id="tabActive" class="active" onclick="showTab('active')">Aktive</button>
<button id="tabCancelled" onclick="showTab('cancelled')">Gek√ºndigte</button>
</div>
<div class="table-wrapper">
<table id="activeTable">
<thead>
<tr><th onclick="sortTable('firstName')">Vorname<span id="arrow-firstName">‚ñ≤</span></th>
<th onclick="sortTable('lastName')">Nachname<span id="arrow-lastName">‚ñº</span></th>
<th>Geschlecht</th><th>Geburtsdatum</th><th>Telefon</th><th>E-Mail</th>
<th>Beitritt</th><th>Sportart</th><th>Gruppe</th><th></th></tr></thead><tbody></tbody></table>
<table id="cancelledTable" style="display:none">
<thead><tr><th>Vorname</th><th>Nachname</th><th>Geschlecht</th><th>Geburtsdatum</th>
<th>Telefon</th><th>E-Mail</th><th>Beitritt</th><th>K√ºndigung</th><th>Sportart</th><th>Gruppe</th><th></th></tr></thead><tbody></tbody></table>
</div>
<div id="memberListActive" class="member-list"></div>
<div id="memberListCancelled" class="member-list" style="display:none"></div>
</main>
<div id="memberModal" class="modal"><div class="modal-content">
<h3 id="modalTitle">Mitglied hinzuf√ºgen</h3>
<label>Vorname:</label><input id="firstName">
<label>Nachname:</label><input id="lastName">
<label>Geschlecht:</label><select id="gender"><option value="">Bitte w√§hlen</option><option>M</option><option>W</option></select>
<label>Geburtsdatum:</label><input type="date" id="birthdate">
<label>Beitrittsdatum:</label><input type="date" id="joinDate">
<label>Telefon:</label><input id="phone">
<label>E-Mail:</label><input type="email" id="email">
<label>Sportart:</label><select id="sport"><option value="">Bitte w√§hlen</option><option>Boxen</option><option>Kickboxen</option></select>
<label>Gruppe:</label><select id="group"><option value="">Bitte w√§hlen</option><option>Kinder</option><option>Erwachsene</option></select>
<div class="modal-buttons">
<button class="btn-blue" onclick="saveMember()">Speichern</button>
<button class="btn-gray" onclick="closeModal()">Abbrechen</button>
</div></div></div>
<script>
let members=JSON.parse(localStorage.getItem('members'))||[];
let cancelled=JSON.parse(localStorage.getItem('cancelled'))||[];
let openIndex=null,filter='alle',sortKey='firstName',sortAsc=true;
function formatDate(d){if(!d)return'';d=new Date(d);return`${String(d.getDate()).padStart(2,'0')}.${String(d.getMonth()+1).padStart(2,'0')}.${d.getFullYear()}`;}
function calcAge(b){if(!b)return'';const birth=new Date(b);return new Date(Date.now()-birth).getUTCFullYear()-1970;}
function render(){
const tbA=document.querySelector('#activeTable tbody'),tbC=document.querySelector('#cancelledTable tbody'),
listA=document.getElementById('memberListActive'),listC=document.getElementById('memberListCancelled');
tbA.innerHTML=tbC.innerHTML=listA.innerHTML=listC.innerHTML='';
let sorted=[...members].sort((a,b)=>a[sortKey].localeCompare(b[sortKey],'de')*(sortAsc?1:-1));
sorted.forEach((m,i)=>{if(filter!=='alle'&&m.sport!==filter&&m.group!==filter)return;
tbA.innerHTML+=`<tr><td>${m.firstName}</td><td>${m.lastName}</td><td>${m.gender}</td><td>${formatDate(m.birthdate)}</td>
<td>${m.phone}</td><td>${m.email}</td><td>${formatDate(m.joinDate)}</td><td>${m.sport}</td><td>${m.group}</td>
<td><button class='info-btn' onclick='openEdit(${members.indexOf(m)})'>i</button></td></tr>`;
listA.innerHTML+=`<div class='member-item' onclick='toggleDetails(${members.indexOf(m)})'>
<h3>${m.firstName} ${m.lastName}</h3>
<div class='member-details' id='detail-${members.indexOf(m)}'>
<p>Geschlecht: ${m.gender}</p><p>Alter: ${calcAge(m.birthdate)} Jahre</p><p>Sportart: ${m.sport}</p><p>Gruppe: ${m.group}</p>
<p>E-Mail: ${m.email}</p><p>Telefon: ${m.phone}</p><p>Beitritt: ${formatDate(m.joinDate)}</p>
<div class='member-actions'>
<button class='btn-blue' onclick='event.stopPropagation();openEdit(${members.indexOf(m)})'>Bearbeiten</button>
<button class='btn-blue' onclick='event.stopPropagation();cancelMember(${members.indexOf(m)})'>K√ºndigen</button>
<button class='btn-red' onclick='event.stopPropagation();deleteMember(${members.indexOf(m)})'>L√∂schen</button>
<button class='btn-gray' onclick='event.stopPropagation();closeDetails(${members.indexOf(m)})'>Schlie√üen</button>
</div></div></div>`});
cancelled.forEach(m=>{
tbC.innerHTML+=`<tr><td>${m.firstName}</td><td>${m.lastName}</td><td>${m.gender}</td>
<td>${formatDate(m.birthdate)}</td><td>${m.phone}</td><td>${m.email}</td><td>${formatDate(m.joinDate)}</td>
<td>${formatDate(m.cancelDate)}</td><td>${m.sport}</td><td>${m.group}</td><td></td></tr>`;
listC.innerHTML+=`<div class='member-item'><h3>${m.firstName} ${m.lastName}</h3>
<div class='member-details open'><p>Gek√ºndigt am: ${formatDate(m.cancelDate)}</p><p>Sportart: ${m.sport}</p><p>Gruppe: ${m.group}</p></div></div>`});
localStorage.setItem('members',JSON.stringify(members));localStorage.setItem('cancelled',JSON.stringify(cancelled));}
function toggleDetails(i){const d=document.getElementById('detail-'+i);
document.querySelectorAll('.member-details.open').forEach(e=>{if(e!==d)e.classList.remove('open')});d.classList.toggle('open');}
function closeDetails(i){document.getElementById('detail-'+i).classList.remove('open');}
function openAddModal(){document.querySelectorAll('#memberModal input,#memberModal select').forEach(e=>e.value='');
document.getElementById('memberModal').style.display='flex';openIndex=null;}
function closeModal(){document.getElementById('memberModal').style.display='none';}
function openEdit(i){const m=members[i];firstName.value=m.firstName;lastName.value=m.lastName;gender.value=m.gender;
birthdate.value=m.birthdate;joinDate.value=m.joinDate;phone.value=m.phone;email.value=m.email;
sport.value=m.sport;group.value=m.group;openIndex=i;document.getElementById('memberModal').style.display='flex';}
function saveMember(){const m={firstName:firstName.value.trim(),lastName:lastName.value.trim(),gender:gender.value,
birthdate:birthdate.value,joinDate:joinDate.value,phone:phone.value,email:email.value,sport:sport.value,group:group.value};
if(!m.firstName||!m.lastName)return alert("Vor- und Nachname erforderlich");
if(openIndex!=null){members[openIndex]=m;openIndex=null;}else members.push(m);closeModal();render();}
function cancelMember(i){if(confirm("Mitglied wirklich k√ºndigen?")){const m=members[i];m.cancelDate=new Date().toISOString();
cancelled.push(m);members.splice(i,1);render();}}
function deleteMember(i){if(confirm("Mitglied endg√ºltig l√∂schen?")){members.splice(i,1);render();}}
function showTab(t){tabActive.classList.remove('active');tabCancelled.classList.remove('active');
activeTable.style.display='none';cancelledTable.style.display='none';memberListActive.style.display='none';memberListCancelled.style.display='none';
if(t==='active'){tabActive.classList.add('active');activeTable.style.display='table';memberListActive.style.display='flex';}
else{tabCancelled.classList.add('active');cancelledTable.style.display='table';memberListCancelled.style.display='flex';}}
function filterMembers(f){filter=f;render();}
function toggleSearch(){const s=searchField;s.style.display=s.style.display==='none'?'block':'none';s.value='';searchMembers();}
function searchMembers(){const q=searchField.value.toLowerCase();
document.querySelectorAll('.member-item').forEach(r=>{r.style.display=r.querySelector('h3').textContent.toLowerCase().includes(q)?'':'none';});}
function sortTable(key){sortAsc=sortKey===key?!sortAsc:true;sortKey=key;
document.querySelectorAll('th span').forEach(el=>el.textContent='‚ñº');
document.getElementById('arrow-'+key).textContent=sortAsc?'‚ñ≤':'‚ñº';render();}
window.onclick=e=>{if(e.target.classList.contains('modal'))closeModal();}
render();
</script>
</body>
</html>
